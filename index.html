<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quanto trampo deu?</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <script>
        // Tailwind config
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                },
            },
        };
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <!-- Main Card -->
    <div class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md">
        
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">
            Quanto trampo deu?
        </h1>
        <p class="text-center text-gray-600 mb-8">
            Descubra quanto tempo do seu trabalho √© necess√°rio para comprar o que voc√™ deseja.
        </p>

        <!-- Calculator Form -->
        <form id="calculator-form" class="space-y-5">
            <div>
                <label for="name" class="block text-sm font-medium text-gray-700">Qual seu nome?</label>
                <input type="text" id="name" name="name" placeholder="Ex: Isabela" class="mt-1 block w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500" required>
            </div>

            <div>
                <label for="salary" class="block text-sm font-medium text-gray-700">Qual seu sal√°rio l√≠quido mensal?</label>
                <div class="relative mt-1">
                    <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500">R$</span>
                    <input type="number" id="salary" name="salary" placeholder="Ex: 3000" class="pl-10 block w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500" required>
                </div>
            </div>

            <div>
                <label for="product" class="block text-sm font-medium text-gray-700">O que voc√™ quer comprar?</label>
                <input type="text" id="product" name="product" placeholder="Ex: Um livro" class="mt-1 block w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500" required>
            </div>

            <div>
                <label for="cost" class="block text-sm font-medium text-gray-700">Quanto custa esse produto?</label>
                 <div class="relative mt-1">
                    <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500">R$</span>
                    <input type="number" id="cost" name="cost" placeholder="Ex: 50" class="pl-10 block w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500" required>
                </div>
            </div>

            <!-- Buttons -->
            <button type="button" id="calculate-btn" class="w-full bg-blue-600 text-white p-4 rounded-lg font-bold text-lg shadow-lg hover:bg-blue-700 transition duration-300 ease-in-out transform hover:-translate-y-0.5">
                Calcular
            </button>
            
            <button type="button" id="reset-btn" class="w-full bg-gray-200 text-gray-700 p-2 rounded-lg font-medium hover:bg-gray-300 transition">
                Limpar
            </button>
        </form>

        <div id="result-area" class="mt-8 text-center">
        </div>

    </div>

    <script>
        // --- Constantes de C√°lculo ---
        // Baseado em 22 dias √∫teis/m√™s, 8 horas/dia.
        const WORK_DAYS_PER_MONTH = 22;
        const HOURS_PER_WORK_DAY = 8;
        const MINUTES_PER_HOUR = 60;
        
        // Constantes derivadas para facilitar a convers√£o
        const MINUTES_PER_DAY = HOURS_PER_WORK_DAY * MINUTES_PER_HOUR; // 480
        const MINUTES_PER_WEEK = MINUTES_PER_DAY * 5; // 2400 (semana de 5 dias)
        const MINUTES_PER_MONTH = MINUTES_PER_DAY * WORK_DAYS_PER_MONTH; // 10560
        const MINUTES_PER_YEAR = MINUTES_PER_MONTH * 12; // 126720

        document.addEventListener('DOMContentLoaded', (event) => {

            // --- Seletores de Elementos ---
            const calculateBtn = document.getElementById('calculate-btn');
            const resetBtn = document.getElementById('reset-btn');
            const resultDiv = document.getElementById('result-area');
            const form = document.getElementById('calculator-form');

            // --- Verifica√ß√£o de Seguran√ßa ---
            if (!calculateBtn || !resetBtn || !resultDiv || !form) {
                console.error("Erro cr√≠tico: N√£o foi poss√≠vel encontrar os elementos essenciais do DOM.");
                return;
            }

            // --- Event Listeners (Ouvintes de Eventos) ---
            calculateBtn.addEventListener('click', calculateWorkTime);
            resetBtn.addEventListener('click', resetCalculator);

            // --- Fun√ß√£o Principal: Calcular Tempo de Trabalho ---
            function calculateWorkTime() {
                // 1. Obter valores dos inputs
                const friendName = document.getElementById('name').value;
                const monthlySalary = parseFloat(document.getElementById('salary').value);
                const productName = document.getElementById('product').value;
                const productCost = parseFloat(document.getElementById('cost').value);

                // 2. Validar os inputs
                if (!friendName || !productName) {
                    displayError("Por favor, preencha todos os nomes.");
                    return;
                }
                if (isNaN(monthlySalary) || monthlySalary <= 0) {
                    displayError("Por favor, insira um sal√°rio v√°lido (maior que zero).");
                    return;
                }
                if (isNaN(productCost) || productCost < 0) {
                    displayError("Por favor, insira um custo de produto v√°lido.");
                    return;
                }

                // 3. Realizar o c√°lculo
                const salaryPerMinute = monthlySalary / MINUTES_PER_MONTH;
                
                // Lidar com custo R$ 0,00
                if (productCost === 0) {
                    displayResult(friendName, productName, "0 minutos. √â de gra√ßa!", 0);
                    return;
                }

                const minutesRequired = productCost / salaryPerMinute;

                // 4. Formatar a string de dura√ß√£o
                const formattedDuration = formatDuration(minutesRequired);

                // 5. Exibir o resultado
                displayResult(friendName, productName, formattedDuration, minutesRequired);
            }

            // --- Fun√ß√£o Auxiliar: Formatar Dura√ß√£o ---
            function formatDuration(totalMinutes) {
                // Arredonda o total de minutos
                const roundedTotalMinutes = Math.round(totalMinutes);

                if (roundedTotalMinutes < 1) return "menos de 1 minuto";
                
                // Fun√ß√£o auxiliar para plurais em portugu√™s
                // Retorna null se a contagem for 0, sen√£o retorna a string formatada
                const pluralize = (count, singular, plural) => {
                    if (count === 0) return null;
                    return count === 1 ? `${count} ${singular}` : `${count} ${plural}`;
                };

                let remainingMinutes = roundedTotalMinutes;

                // Calcula todas as unidades com base nos restos
                const years = Math.floor(remainingMinutes / MINUTES_PER_YEAR);
                remainingMinutes %= MINUTES_PER_YEAR;

                const months = Math.floor(remainingMinutes / MINUTES_PER_MONTH);
                remainingMinutes %= MINUTES_PER_MONTH;

                const weeks = Math.floor(remainingMinutes / MINUTES_PER_WEEK);
                remainingMinutes %= MINUTES_PER_WEEK;

                const days = Math.floor(remainingMinutes / MINUTES_PER_DAY);
                remainingMinutes %= MINUTES_PER_DAY;

                const hours = Math.floor(remainingMinutes / MINUTES_PER_HOUR);
                remainingMinutes %= MINUTES_PER_HOUR;

                const minutes = remainingMinutes; // O resto final

                // Cria um array com todas as partes que n√£o s√£o zero
                const allParts = [
                    pluralize(years, "ano", "anos"),
                    pluralize(months, "m√™s", "meses"),
                    pluralize(weeks, "semana", "semanas"),
                    pluralize(days, "dia", "dias"),
                    pluralize(hours, "hora", "horas"),
                    pluralize(minutes, "minuto", "minutos")
                ].filter(part => part !== null); // Filtra os valores nulos (zero)

                if (allParts.length === 0) {
                    return "0 minutos"; // Seguran√ßa, embora a checagem < 1 deva pegar
                }

                // Pega apenas as duas unidades de tempo mais significativas
                const visibleParts = allParts.slice(0, 2);

                // Junta com "e"
                if (visibleParts.length === 1) {
                    return visibleParts[0]; // ex: "5 minutos"
                }

                // ex: "1 hora e 6 minutos" ou "2 dias e 4 horas"
                return visibleParts.join(" e ");
            }

            // --- Fun√ß√µes de UI (Interface do Usu√°rio) ---
            
            function displayResult(name, product, duration, totalMinutes) {
                
                // L√≥gica para as mensagens especiais ("easter egg")
                let specialMessage = "";
                // Usa constantes para facilitar a compara√ß√£o
                if (totalMinutes > MINUTES_PER_WEEK && totalMinutes < MINUTES_PER_MONTH) { 
                    specialMessage = `
                        <p class="text-lg text-amber-700 font-medium mt-4">
                            Ser√° que vale o trampo? ü§î
                        </p>
                    `;
                }
                if (totalMinutes >= MINUTES_PER_MONTH) { // Mais de 1 m√™s de trabalho
                    specialMessage = `
                        <p class="text-xl text-red-700 font-bold mt-4">
                            Meu sal√°rio chora! üò¢
                        </p>
                    `;
                }

                // Todo texto vis√≠vel ao usu√°rio continua em portugu√™s
                resultDiv.innerHTML = `
                    <div class="bg-blue-50 border border-blue-200 p-6 rounded-lg">
                        <p class="text-xl text-gray-800">Ei, <strong>${name}</strong>!</p>
                        <p class="text-lg text-gray-700 mt-2">
                            Para comprar <strong>${product}</strong>, voc√™ precisa trabalhar por:
                        </p>
                        <p class="text-4xl font-extrabold text-blue-600 my-4">
                            ${duration}
                        </p>
                        
                        <!-- Mensagem especial aparece aqui -->
                        ${specialMessage}

                        <p class="text-xs text-gray-500 mt-4">
                            (Base de c√°lculo: ${HOURS_PER_WORK_DAY}h/dia, ${WORK_DAYS_PER_MONTH} dias/m√™s)
                        </p>
                    </div>
                `;
            }

            function displayError(message) {
                resultDiv.innerHTML = `
                    <div class="bg-red-50 border border-red-200 p-4 rounded-lg">
                        <p class="text-red-700 font-medium">${message}</p>
                    </div>
                `;
            }

            function resetCalculator() {
                form.reset(); // Limpa os campos do formul√°rio
                resultDiv.innerHTML = ""; // Limpa a √°rea de resultado
            }
        });
    </script>

</body>
</html>